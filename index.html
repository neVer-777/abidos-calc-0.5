
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#ffffff">
    <link rel="manifest" href="manifest.json">
    <title>Abidos Kalkulation</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <main>
        <h1>Abidos Kalkulationstool</h1>
        <form id="calcForm">
            <section>
                <h2>Eingaben</h2>
                <label>Timber Preis (pro 100): <input onfocus="this.select()" type="number" step="0.01" id="timberPrice"></label>
                <label>Timber Bestand: <input onfocus="this.select()" type="number" id="timberStock"></label>
                <label>Tender Timber Preis (pro 100): <input onfocus="this.select()" type="number" step="0.01" id="tenderPrice"></label>
                <label>Tender Timber Bestand: <input onfocus="this.select()" type="number" id="tenderStock"></label>
                <label>Abidos Timber Preis (pro 100): <input onfocus="this.select()" type="number" step="0.01" id="abidosTimberPrice"></label>
                <label>Abidos Timber Bestand: <input onfocus="this.select()" type="number" id="abidosTimberStock"></label>
                <label>Abidos Fusion Preis (pro StÃ¼ck): <input onfocus="this.select()" type="number" step="0.01" id="abidosFusionPrice"></label>
                <label>Abidos Fusion Bestand: <input onfocus="this.select()" type="number" id="abidosFusionStock"></label>
                <label>Herstellungskosten (fÃ¼r 10 Fusionen): <input onfocus="this.select()" type="number" step="0.01" id="manufacturingCost" value="364"></label>
            </section>
            <button type="button" onclick="calculate()">Berechnen</button>
        </form>
        <section id="results"></section>
    
<section id="sales-calc" class="section">
  <h2>ðŸ“¦ Verkaufsrechnung Lagerbestand</h2>
  <div class="result-block" id="sales-results">
    <p>Ergebnisse werden nach Klick auf <strong>Berechnen</strong> angezeigt.</p>
  </div>
</section>

</main>
    <script src="app.js">
function calculateSalesFromStock(prices, stock) {
    const items = [
        { name: 'Timber', priceKey: 'timber', amountKey: 'stock_timber' },
        { name: 'Tender Timber', priceKey: 'tender', amountKey: 'stock_tender' },
        { name: 'Abidos Timber', priceKey: 'abidos', amountKey: 'stock_abidos' },
        { name: 'Abidos Fusion', priceKey: 'fusion', amountKey: 'stock_fusion' }
    ];

    let html = '';
    let totalBrutto = 0;
    let totalNetto = 0;

    for (let item of items) {
        let price = parseFloat(prices[item.priceKey].replace(',', '.')) || 0;
        let amount = parseInt(stock[item.amountKey]) || 0;

        let brutto = 0;
        if (item.priceKey === 'fusion') {
            brutto = price * amount;
        } else {
            brutto = (price / 100) * amount;
        }

        let netto = brutto * 0.95;
        totalBrutto += brutto;
        totalNetto += netto;

        html += `
        <div class="result-line">
            <strong>${item.name}</strong>:<br>
            Brutto: ${formatNumber(brutto)} Gold<br>
            Netto (abzgl. 5â€¯%): ${formatNumber(netto)} Gold
        </div>`;
    }

    html += `<hr><div class="result-line"><strong>GesamterlÃ¶s Netto:</strong> ${formatNumber(totalNetto)} Gold</div>`;

    document.getElementById("sales-results").innerHTML = html;
}


calculateSalesFromStock(inputs, inputs);

window.addEventListener("load", function() {
    const fields = document.querySelectorAll("input");
    fields.forEach(field => {
        const saved = localStorage.getItem(field.id);
        if (saved) field.value = saved;
        field.addEventListener("input", () => {
            localStorage.setItem(field.id, field.value);
        });
    });
});

</script>
</body>
</html>
